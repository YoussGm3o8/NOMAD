{"openapi":"3.1.0","info":{"title":"NOMAD Edge Core API","description":"Drone-side API for NOMAD (AEAC 2026) - Task 1 & Task 2 Operations","version":"1.0.0"},"paths":{"/":{"get":{"tags":["System"],"summary":"Root","description":"API root - returns service information.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"tags":["System"],"summary":"Health Check","description":"Comprehensive health check endpoint.\n\nReturns system health including CPU/GPU temperatures,\nmemory usage, VIO status, and network connectivity.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/detailed":{"get":{"tags":["System"],"summary":"Detailed Health","description":"Get detailed health metrics for monitoring dashboard.","operationId":"detailed_health_health_detailed_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/status":{"get":{"tags":["System"],"summary":"Get Status","description":"Get current system state including all telemetry.","operationId":"get_status_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/network/status":{"get":{"tags":["Network"],"summary":"Network Status","description":"Get current network + tailscale status.","operationId":"network_status_network_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/network/reconnect":{"post":{"tags":["Network"],"summary":"Network Reconnect","description":"Trigger Tailscale reconnection.","operationId":"network_reconnect_network_reconnect_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/network/ping/{host}":{"get":{"tags":["Network"],"summary":"Network Ping","operationId":"network_ping_network_ping__host__get","parameters":[{"name":"host","in":"path","required":true,"schema":{"type":"string","title":"Host"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/task/1/capture":{"post":{"tags":["Task 1"],"summary":"Task1 Capture","description":"Capture snapshot for Task 1 recon mission.\n\nCaptures current position, heading, and camera image.\nUsed for outdoor GPS-based reconnaissance.","operationId":"task1_capture_api_task_1_capture_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task1CaptureRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task1CaptureResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/task/2/reset_map":{"post":{"tags":["Task 2"],"summary":"Task2 Reset Map","description":"Reset the exclusion map for Task 2.\n\nClears all recorded target positions, allowing\npreviously sprayed targets to be detected again.","operationId":"task2_reset_map_api_task_2_reset_map_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task2ResetRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/task/2/target_hit":{"post":{"tags":["Task 2"],"summary":"Task2 Target Hit","description":"Register a target hit for Task 2 exclusion map.\n\nRecords the 3D position of a sprayed target to prevent\nre-engagement. Uses VIO frame coordinates.","operationId":"task2_target_hit_api_task_2_target_hit_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task2HitRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/task/2/exclusion_map":{"get":{"tags":["Task 2"],"summary":"Task2 Get Exclusion Map","description":"Get current exclusion map targets.","operationId":"task2_get_exclusion_map_api_task_2_exclusion_map_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/vio/status":{"get":{"tags":["VIO"],"summary":"Vio Status","description":"Get VIO pipeline status.","operationId":"vio_status_api_vio_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/vio/update":{"post":{"tags":["VIO"],"summary":"Vio Update","description":"Receive VIO pose update from external source (ROS bridge).\n\nThis endpoint is called by the ros_http_bridge.py script running\ninside the Isaac ROS container to send VIO data to edge_core.","operationId":"vio_update_api_vio_update_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VIOUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/vio/pose":{"get":{"tags":["VIO"],"summary":"Vio Pose","description":"Get current VIO pose (position and orientation).","operationId":"vio_pose_api_vio_pose_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/vio/trajectory":{"get":{"tags":["VIO"],"summary":"Vio Trajectory","description":"Get VIO trajectory for visualization.\n\nReturns a list of (x, y, z) points representing the drone's path.\nUse max_points to limit the response size.","operationId":"vio_trajectory_api_vio_trajectory_get","parameters":[{"name":"max_points","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"default":100,"title":"Max Points"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["VIO"],"summary":"Vio Clear Trajectory","description":"Clear the VIO trajectory history.","operationId":"vio_clear_trajectory_api_vio_trajectory_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/vio/reset_origin":{"post":{"tags":["VIO"],"summary":"Vio Reset Origin","description":"Reset VIO tracking origin to current position.","operationId":"vio_reset_origin_api_vio_reset_origin_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/vio/calibration":{"get":{"tags":["VIO"],"summary":"Vio Calibration Status","description":"Get VIO calibration validation results.","operationId":"vio_calibration_status_api_vio_calibration_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/nav/status":{"get":{"tags":["Navigation"],"summary":"Nav Status","description":"Get navigation controller status.\n\nReturns the current navigation mode, health, and commanded velocities.\nThis is the Jetson-centric navigation controller that bridges\nROS2 nav2/nvblox to ArduPilot GUIDED mode.","operationId":"nav_status_api_nav_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/nav/velocity":{"post":{"tags":["Navigation"],"summary":"Nav Velocity","description":"Send velocity command for autonomous navigation.\n\nThis is the primary endpoint for Jetson-centric navigation.\nIsaac ROS nav2/nvblox generates /cmd_vel which ros_http_bridge\nforwards here. Edge Core then sends SET_POSITION_TARGET_LOCAL_NED\nto ArduPilot in GUIDED mode.\n\nVelocity convention (ROS REP 103):\n- vx: Forward velocity (m/s, positive = forward)\n- vy: Lateral velocity (m/s, positive = left)\n- vz: Vertical velocity (m/s, positive = up)\n- yaw_rate: Yaw rate (rad/s, positive = CCW)","operationId":"nav_velocity_api_nav_velocity_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NavVelocityRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/nav/position":{"post":{"tags":["Navigation"],"summary":"Nav Position","description":"Send position target for navigation.\n\nPosition is in local NED frame relative to VIO origin.","operationId":"nav_position_api_nav_position_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NavPositionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/nav/stop":{"post":{"tags":["Navigation"],"summary":"Nav Stop","description":"Emergency stop - send zero velocity command.\n\nUse this to immediately halt all movement. The vehicle will\nattempt to hold position (requires VIO/GPS).","operationId":"nav_stop_api_nav_stop_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/nav/enable_guided":{"post":{"tags":["Navigation"],"summary":"Nav Enable Guided","description":"Request ArduPilot to enter GUIDED mode.\n\nGUIDED mode is required for Jetson navigation commands to work.\nThis sends a MAVLink mode change request to the flight controller.","operationId":"nav_enable_guided_api_nav_enable_guided_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/camera/status":{"get":{"tags":["Camera"],"summary":"Camera Status","description":"Get ZED camera status.","operationId":"camera_status_api_camera_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/camera/reset_tracking":{"post":{"tags":["Camera"],"summary":"Camera Reset Tracking","description":"Reset camera positional tracking.","operationId":"camera_reset_tracking_api_camera_reset_tracking_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/terminal/exec":{"post":{"tags":["Terminal"],"summary":"Execute Terminal Command","description":"Execute a shell command on the Jetson.\n\nWARNING: This is a powerful endpoint. Use with caution.\nAll commands are now allowed in production mode.\n\nCommon uses:\n- System diagnostics\n- Network troubleshooting\n- Service management","operationId":"execute_terminal_command_api_terminal_exec_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TerminalCommandRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TerminalCommandResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/terminal/logs":{"get":{"tags":["Terminal"],"summary":"Get Service Logs","description":"Get recent logs for a service.","operationId":"get_service_logs_api_terminal_logs_get","parameters":[{"name":"service","in":"query","required":false,"schema":{"type":"string","description":"Service name","default":"edge_core","title":"Service"},"description":"Service name"},{"name":"lines","in":"query","required":false,"schema":{"type":"integer","description":"Number of lines","default":50,"title":"Lines"},"description":"Number of lines"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/services/status":{"get":{"tags":["System"],"summary":"Services Status","description":"Get status of all NOMAD services.\n\nReturns status of:\n- mavlink-router: MAVLink routing to CubePilot\n- mediamtx: RTSP video server\n- edge_core: This API service (always running if you see this)\n- isaac_ros: Isaac ROS bridge status\n- vio: VIO pipeline status","operationId":"services_status_api_services_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/stream/info":{"get":{"tags":["Streaming"],"summary":"Stream Info","description":"Get RTSP stream information.","operationId":"stream_info_api_stream_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/isaac/status":{"get":{"tags":["Isaac ROS"],"summary":"Isaac Status","description":"Get Isaac ROS bridge status.\n\nReturns information about the perception backend,\nVIO state, and exclusion map status.","operationId":"isaac_status_api_isaac_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/isaac/start":{"post":{"tags":["Isaac ROS"],"summary":"Isaac Start","description":"Start Isaac ROS container and services.\n\nThis runs the start_isaac_ros_auto.sh script which:\n1. Starts the Docker container\n2. Installs dependencies\n3. Launches ZED + Nvblox\n4. Starts the ROS-HTTP bridge","operationId":"isaac_start_api_isaac_start_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/isaac/stop":{"post":{"tags":["Isaac ROS"],"summary":"Isaac Stop","description":"Stop Isaac ROS container and services.","operationId":"isaac_stop_api_isaac_stop_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/isaac/logs":{"get":{"tags":["Isaac ROS"],"summary":"Isaac Logs","description":"Get Isaac ROS container logs.","operationId":"isaac_logs_api_isaac_logs_get","parameters":[{"name":"log_type","in":"query","required":false,"schema":{"type":"string","description":"Log type: all, zed, bridge","default":"all","title":"Log Type"},"description":"Log type: all, zed, bridge"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/isaac/vio":{"get":{"tags":["Isaac ROS"],"summary":"Isaac Vio","description":"Get current VIO state from Isaac ROS VSLAM or ZED.","operationId":"isaac_vio_api_isaac_vio_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/isaac/detections":{"get":{"tags":["Isaac ROS"],"summary":"Isaac Detections","description":"Get current YOLO detections from Isaac ROS.","operationId":"isaac_detections_api_isaac_detections_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/isaac/exclusion_map":{"get":{"tags":["Isaac ROS"],"summary":"Isaac Exclusion Map","description":"Get exclusion map from Isaac ROS bridge (auto-managed).","operationId":"isaac_exclusion_map_api_isaac_exclusion_map_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/isaac/exclusion_map/add":{"post":{"tags":["Isaac ROS"],"summary":"Isaac Add Exclusion","description":"Add target to Isaac ROS managed exclusion map.","operationId":"isaac_add_exclusion_api_isaac_exclusion_map_add_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task2HitRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/isaac/exclusion_map/clear":{"post":{"tags":["Isaac ROS"],"summary":"Isaac Clear Exclusion","description":"Clear Isaac ROS managed exclusion map.","operationId":"isaac_clear_exclusion_api_isaac_exclusion_map_clear_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"NavPositionRequest":{"properties":{"x":{"type":"number","title":"X"},"y":{"type":"number","title":"Y"},"z":{"type":"number","title":"Z"},"yaw":{"type":"number","title":"Yaw"},"source":{"type":"string","title":"Source","default":"nav2"}},"type":"object","required":["x","y","z","yaw"],"title":"NavPositionRequest","description":"Request model for navigation position target."},"NavVelocityRequest":{"properties":{"timestamp":{"type":"number","title":"Timestamp"},"vx":{"type":"number","title":"Vx"},"vy":{"type":"number","title":"Vy"},"vz":{"type":"number","title":"Vz"},"yaw_rate":{"type":"number","title":"Yaw Rate"},"source":{"type":"string","title":"Source","default":"nav2"}},"type":"object","required":["timestamp","vx","vy","vz","yaw_rate"],"title":"NavVelocityRequest","description":"Request model for navigation velocity command from ROS nav2/nvblox."},"Task1CaptureRequest":{"properties":{"heading_deg":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Heading Deg"},"gimbal_pitch_deg":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Gimbal Pitch Deg"},"lidar_distance_m":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lidar Distance M"}},"type":"object","title":"Task1CaptureRequest","description":"Request model for Task 1 capture."},"Task1CaptureResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"timestamp":{"type":"string","title":"Timestamp"},"target_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target Text"},"position":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Position"},"heading_deg":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Heading Deg"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["success","timestamp"],"title":"Task1CaptureResponse","description":"Response model for Task 1 capture."},"Task2HitRequest":{"properties":{"x":{"type":"number","title":"X"},"y":{"type":"number","title":"Y"},"z":{"type":"number","title":"Z"}},"type":"object","required":["x","y","z"],"title":"Task2HitRequest","description":"Request model for Task 2 target hit."},"Task2ResetRequest":{"properties":{"confirm":{"type":"boolean","title":"Confirm","default":false}},"type":"object","title":"Task2ResetRequest","description":"Request model for Task 2 reset."},"TerminalCommandRequest":{"properties":{"command":{"type":"string","title":"Command"},"timeout":{"type":"integer","title":"Timeout","default":10}},"type":"object","required":["command"],"title":"TerminalCommandRequest","description":"Request model for terminal command execution."},"TerminalCommandResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"stdout":{"type":"string","title":"Stdout"},"stderr":{"type":"string","title":"Stderr"},"return_code":{"type":"integer","title":"Return Code"}},"type":"object","required":["success","stdout","stderr","return_code"],"title":"TerminalCommandResponse","description":"Response model for terminal command."},"VIOUpdateRequest":{"properties":{"timestamp":{"type":"number","title":"Timestamp"},"x":{"type":"number","title":"X"},"y":{"type":"number","title":"Y"},"z":{"type":"number","title":"Z"},"roll":{"type":"number","title":"Roll"},"pitch":{"type":"number","title":"Pitch"},"yaw":{"type":"number","title":"Yaw"},"vx":{"type":"number","title":"Vx","default":0.0},"vy":{"type":"number","title":"Vy","default":0.0},"vz":{"type":"number","title":"Vz","default":0.0},"confidence":{"type":"number","title":"Confidence","default":1.0},"source":{"type":"string","title":"Source","default":"external"}},"type":"object","required":["timestamp","x","y","z","roll","pitch","yaw"],"title":"VIOUpdateRequest","description":"Request model for VIO pose update from ROS bridge."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}
